<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Cors'Expé</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="../css/styleaccueil.css" rel="stylesheet" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<style>
.menuvertical {
  text-decoration: none;
  transition: background-color 0.3s ease;
  border-radius: 11px;
}

.menuvertical:hover {
  background-color: #c5ccc0;
  color: #fff;
}
</style>
<body>
  <div class="container-fluid">
      <div class="row">
          <div class="col-12 col-sm-3 col-xl-2" style="background-color: #D5DBD1;">
              <nav class="navbar navbar-expand-lg navbar-light">
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                  </button>
                           <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="nav flex-column mx-1">
                            <a class="navbar-brand" href="#">
                                <img src="../icone/terradata.png" alt="Logo de Terradata" style="height: 120px;">
                            </a>
                                 <div class="d-block d-sm-none">
                              <a class="nav-link fw-semibold" href="../index.html" style="text-decoration: none; color: #3A4E36;">Accueil</a>
                              <a class="nav-link fw-semibold" href="../lesbiocontroles.html" style="text-decoration: none; color: #3A4E36;">Les biocontrôles</a>
                              <a class="nav-link fw-semibold" href="../data.html" style="text-decoration: none; color: #3A4E36;">Les datas</a>
                              <a class="nav-link fw-semibold" href="../Nosconseils.html" style="text-decoration: none; color: #3A4E36;">Nos conseils</a>
                              <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
                            </div>
                            <div class="d-none d-sm-block d-lg-none">
                             <a class="nav-link fw-semibold" href="../index.html" style="text-decoration: none; color: #3A4E36;">Accueil</a>
                              <a class="nav-link fw-semibold" href="../lesbiocontroles.html" style="text-decoration: none; color: #3A4E36;">Les biocontrôles</a>
                              <a class="nav-link fw-semibold" href="../data.html" style="text-decoration: none; color: #3A4E36;">Les datas</a>
                              <a class="nav-link fw-semibold" href="../Nosconseils.html" style="text-decoration: none; color: #3A4E36;">Nos conseils</a>
                              <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
                            </div>
                           <div class="d-flex align-items-center">
                              <img class="rounded" src="../icone/iconepresentation.png" alt="" style="height: 20px; width: 20px;">
                              <a class="mx-1 fw-semibold" style="text-decoration: none; color: #3A4E36;">Présentation</a>
                            </div>
                               
                            <a class="nav-link mt-2 menuvertical" href="../data.html" style="text-decoration: none; color: #3A4E36;">Bienvenue dans <br>nos datas</a>
                            <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
                            <div class="d-flex align-items-center">
                              <img class="rounded" src="../icone/iconecomparaison.png" alt="" style="height: 20px; width: 20px;">
                              <a class="mx-1 fw-semibold" style="text-decoration: none; color: #3A4E36;">Comparaison</a>
                            </div>
                            <a class="nav-link mt-2 menuvertical" href="../comparaison.html" style="text-decoration: none; color: #3A4E36;">Comment déterminer <br> un bon projet ?</a>
                            <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
                            <div class="d-flex align-items-center">
                            <img class="rounded" src="../icone/iconeprojets.png" alt="" style="height: 20px; width: 20px;">
                            <a class="mx-1 fw-semibold" href="#" style="text-decoration: none; color: #3A4E36;">Projets</a>
                          </div>
                          <a class="nav-link mt-2 menuvertical" href="../4SYSLEG/4SYSLEG.html" style="text-decoration: none; color: #3A4E36;">4SYSLEG</a>
                          <a class="nav-link menuvertical" href="../BioREco/BioREco.html" style="text-decoration: none; color: #3A4E36;">BioREco</a>
                          <a class="nav-link menuvertical" href="../BREIZLEG/BREIZLEG.html" style="text-decoration: none; color: #3A4E36;">BREIZLEG</a>
                          <a class="nav-link menuvertical" href="../CanécoH/CanécoH.html" style="text-decoration: none; color: #3A4E36;">CanécoH</a>
                          <a class="nav-link menuvertical" href="../CAP ReD/CAP ReD.html" style="text-decoration: none; color: #3A4E36;">CAP ReD</a>
                          <a class="nav-link menuvertical" href="../Cors'Expé/Cors'Expé.html" style="text-decoration: none; color: #3A4E36;">Cors'Expé</a>
                          <a class="nav-link menuvertical" href="../DEPHY Carotte/DEPHY Carotte.html" style="text-decoration: none; color: #3A4E36;">DEPHY Carotte</a>
                          <a class="nav-link menuvertical" href="../DEPHY EXP NPDC/DEPHY EXP NPDC.html" style="text-decoration: none; color: #3A4E36;">DEPHY EXP NPDC</a>
                          <a class="nav-link menuvertical" href="../DEPHY Fraise/DEPHY Fraise.html" style="text-decoration: none; color: #3A4E36;">DEPHY Fraise</a>
                          <a class="nav-link menuvertical" href="../DEPHY Serre/DEPHY Serre.html" style="text-decoration: none; color: #3A4E36;">DEPHY Serre</a>
                          <a class="nav-link menuvertical" href="../ECOLEG/ECOLEG.html" style="text-decoration: none; color: #3A4E36;">ECOLEG</a>
                          <a class="nav-link menuvertical" href="../EcoPêche/EcoPêche.html" style="text-decoration: none; color: #3A4E36;">EcoPêche</a>
                          <a class="nav-link menuvertical" href="../EcoViti Alsace/EcoViti Alsace.html" style="text-decoration: none; color: #3A4E36;">EcoViti Alsace</a>
                          <a class="nav-link menuvertical" href="../EcoViti Aquitaine/EcoViti Aquitaine.html" style="text-decoration: none; color: #3A4E36;">EcoViti Aquitaine</a>
                          <a class="nav-link menuvertical" href="../EcoViti Val de Loire-Centre/EcoViti Val de Loire-Centre.html" style="text-decoration: none; color: #3A4E36;">EcoViti Val de Loire-Centre</a>
                          <a class="nav-link menuvertical" href="../EcoViti Arc Méditerranéen/EcoViti Arc Méditerranée.html" style="text-decoration: none; color: #3A4E36;">EcoViti Arc Méditerranéen</a>
                          <a class="nav-link menuvertical" href="../EXPE Ecophyto Lorrain/EXPE Ecophyto Lorrain.html" style="text-decoration: none; color: #3A4E36;">EXPE Ecophyto Lorrain</a>
                          <a class="nav-link menuvertical" href="../EXPE Ecophyto Pomme/EXPE Ecophyto Pomme.html" style="text-decoration: none; color: #3A4E36;">EXPE Ecophyto Pomme</a>
                          <a class="nav-link menuvertical" href="../EXPE systèmes GC Berry/EXPE systèmes GC Berry.html" style="text-decoration: none; color: #3A4E36;">EXPE systèmes GC Berry</a>
                          <a class="nav-link menuvertical" href="../GEDUBAT/GEDUBAT.html" style="text-decoration: none; color: #3A4E36;">GEDUBAT</a>
                          <a class="nav-link menuvertical" href="../HORTIFLOR/HORTIFLOR.html" style="text-decoration: none; color: #3A4E36;">HORTIFLOR</a>
                          <a class="nav-link menuvertical" href="../HORTIPEPI/HORTIPEPI.html" style="text-decoration: none; color: #3A4E36;">HORTIPEPI</a>
                          <a class="nav-link menuvertical" href="../HORTIPOT/HORTIPOT.html" style="text-decoration: none; color: #3A4E36;">HORTIPOT</a>
                          <a class="nav-link menuvertical" href="../INNOViPEST/INNOViPEST.html" style="text-decoration: none; color: #3A4E36;">INNOViPEST</a>
                          <a class="nav-link menuvertical" href="../Otelho/Otelho.html" style="text-decoration: none; color: #3A4E36;">Otelho</a>
                          <a class="nav-link menuvertical" href="../PHYTO-SOL/PHYTO-SOL.html" style="text-decoration: none; color: #3A4E36;">PHYTO-SOL</a>
                          <a class="nav-link menuvertical" href="../Réso0Pest/Réso0Pest.html" style="text-decoration: none; color: #3A4E36;">Réso0Pest</a>
                          <a class="nav-link menuvertical" href="../RESCAM/RESCAM.html" style="text-decoration: none; color: #3A4E36;">RESCAM</a>
                          <a class="nav-link menuvertical" href="../Reseau PI/Reseau PI.html" style="text-decoration: none; color: #3A4E36;">Reseau PI</a>
                          <a class="nav-link menuvertical" href="../SGC Bretagne/SGC-Bretagne.html" style="text-decoration: none; color: #3A4E36;">SGC Bretagne</a>
                          <a class="nav-link menuvertical" href="../System-Eco-Puissance4/System-Eco-Puissance4.html" style="text-decoration: none; color: #3A4E36;">System-Eco-Puissance4</a>
                          <hr style="border: 2px solid #B6BFB0; opacity: 1; border-radius: 10px;">
                      </ul>
                  </div>
              </nav>
          </div>
          
          <div class="col-12 col-sm-9 col-xl-10">
            <nav class="navbar navbar-expand-lg mb-3">
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav ms-auto text-light">
                      <li class="nav-item fw-semibold"><a class="nav-link" href="../index.html">Accueil</a></li>
                      <li class="nav-item fw-semibold"><a class="nav-link" href="../lesbiocontroles.html">Les biocontrôles</a></li>
                      <li class="nav-item fw-semibold"><a class="nav-link" href="../data.html">Les datas</a></li>
                      <li class="nav-item fw-semibold"><a class="nav-link" href="../Nosconseils.html">Nos conseils</a></li>
                    </ul>
                  </div>
            </nav>
            <div class="row mt-5">
              <div class="col-xl-1">
              </div>
              <div class="col-md-12 col-lg-12 col-xl-5" >
                <h3 class="text-center">Cultures</h3>
                <div class="chart">
                    <canvas id="myChart2"></canvas>
                </div>
            </div>
              <div class="col-xl-1">
                  </div>
              <div class="col-md-12 col-lg-12 col-xl-4 " >
                  <h3 class="text-center">Type de traitement</h3>
                <div class="chart">
                  <canvas id="myChart"></canvas>
                </div>
                <div class="col-xl-1">
              </div>
              </div>
              <div class="row mt-5">
                  <div class="col-xl-1">
                  </div>
                  <div class="col-md-12 col-lg-12 col-xl-10">
                      <h3 class="text-center mt-4">Nombre de satisfaction</h3>
                      <div class="chart mt-3">
                          <canvas id="myChart3"></canvas>
                  </div>
                  </div>
                  <div class="col-xl-1">
                  </div>
            </div>
          </div>
        </div>
      </div>
      <script>
        d3.csv("302.csv").then(data => {
            // Filtre pour selectionner uniquement le projet
            const projectData = data.filter(d => d["Nom du projet "]?.trim().toLowerCase() === "cors'expé");

            // Compter les types de traitement
            const counts = {};
            projectData.forEach(d => {
                const typedetraitement = d["Type de traitement "]?.trim();
                if (typedetraitement) counts[typedetraitement] = (counts[typedetraitement] || 0) + 1;
            });

            // Préparer les données pour le graph
            const labels = Object.keys(counts);
            const values = Object.values(counts);
            const backgroundcolors = [
            'rgb(45, 64, 40, 0.75)',
              'rgb(97, 115, 92, 0.75)',
              'rgb(164, 176, 156, 0.75)',
              'rgb(213, 219, 208, 0.75)',
              'rgb(188,165,203, 0.75)',
              'rgb(146,114,166, 0.75)',
              'rgb(109,47,127, 0.75)',
              'rgb(68,12,83), 0.75',
      
            ];

            // Afficher le graphique en polardiagramme
            new Chart(document.getElementById('myChart'), {
                type: 'polarArea',
                data: {
                    labels,
                    datasets: [{
                      data: values,
                      backgroundColor: backgroundcolors
                    }]
                },
            });
        })
      d3.csv("302.csv").then(data => {
               // Filtre pour selectionner uniquement le projet
               const projectData = data.filter(d => d["Nom du projet "]?.trim().toLowerCase() === "cors'expé");

               // Compter les types de cultures
               const counts = {};
               projectData.forEach(d => {
                   const cultures = d["Cultures"]?.trim();
                   if (cultures) counts[cultures] = (counts[cultures] || 0) + 1;
               });

               // Préparer les données pour le graph
               const labels = Object.keys(counts);
               const values = Object.values(counts);
               const backgroundcolors = [
               'rgb(45, 64, 40)',
              'rgb(97, 115, 92)',
              'rgb(164, 176, 156)',
              'rgb(213, 219, 208)',
              '#CCD5AE',
              '#BCA5CB',
              '#9272A6',
              '#6D2F7F',
              '#440C53',
           
               ];

               // Afficher le graphique en donut
               new Chart(document.getElementById('myChart2'), {
                   type: 'doughnut',
                   data: {
                       labels,
                       datasets: [{
                         data: values,
                         backgroundColor: backgroundcolors
                       }]
                   },
               });
           })
             const backgroundcolors = [
   'rgb(45, 64, 40)',
                'rgb(97, 115, 92)',
                'rgb(164, 176, 156)',
                'rgb(213, 219, 208)',
        ];
    
             d3.csv("302.csv").then(function(data) {
            console.log("Données brutes chargées :", data);
    
            // Filtrer les données pour le projet
            const filteredData = data.filter(d =>
                d["Nom du projet "] && d["Nom du projet "].trim().toLowerCase() === "cors'expé"
            );
            console.log("Données filtrées :", filteredData);
    
            // Extraire les labels uniques (méthodes)
            const labels = [...new Set(filteredData.map(d => d["Nom méthode "]?.trim()))];
            console.log("Labels (Nom méthode) :", labels);
    
            // Catégories de satisfaction
            const categories = ["Bon", "Mitigé", "Insatisfaisant", "Aucun avis émis"];
    
            // Préparer les données pour chaque catégorie
            const datasets = categories.map((category, index) => ({
                label: category,
                backgroundColor: backgroundcolors[index],
                data: labels.map(label => {
                    const filtered = filteredData.filter(d =>
                        d["Nom méthode "]?.trim() === label && d["Niveau de satisfaction de l'utilisation de la méthode"] === category
                    );
                    return filtered.length;
                }),
            }));
            console.log("Datasets :", datasets);
    
            // Dessiner le graphique
            const ctx = document.getElementById("myChart3").getContext("2d");
            new Chart(ctx, {
                type: "bar",
                data: {
                    labels: labels,
                    datasets: datasets,
                },
                options: {
                    scales: {
                        x: { stacked: true },
                        y: { stacked: true },
                    },
                },
            });
        });
        </script>
          <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
          </body>
          
          </html>